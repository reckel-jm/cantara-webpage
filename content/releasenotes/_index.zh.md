---
title: "版本说明"
date: 2022-08-02T16:34:40+02:00
draft: false
weight: 2

---

本页包含有关不同版本（发布）变更的信息以及未来计划。

---

## 版本发布

### 版本 2.7.1（2026-02-27）

#### 新功能

- **演示期间切换黑屏**：演示控制栏中的新按钮可让您立即将屏幕变黑并恢复。键盘快捷键 `B` 具有相同效果。

#### 错误修复

- 修复内存泄漏：`DestroyPresentationStyleSettings` 是一个空操作，从未释放其拥有的 `TFont`，导致每次演示开始、样式预览刷新和图片导出时字体泄漏。
- 修复在演示活动时关闭 Cantara 时的 SIGSEGV 崩溃：`FormHide` 在表单销毁期间触发（在 `FormDestroy` 已经释放对象之后），通过 `PresentationCanvas` 导致空指针解引用和无效窗口句柄访问。
- 将析构函数和 `FormDestroy` 处理程序中所有裸露的 `.Destroy` 调用替换为 `FreeAndNil`，以防止销毁期间的空指针崩溃。
- 修复 `TLoadImageThread` 中的内存泄漏：当被新的 `LoadData` 调用覆盖时，存储的 `TPresentationStyleSettings.Font` 从未被释放。
- 修复 `TfrmSettings.gbPresentationClick` 中的内存泄漏：在创建新画布之前，现有的预览画布没有被释放。

### 版本 2.7.0（2026-02-21）

#### 新功能

- **每首歌曲的样式覆盖**：选择中的每首歌曲现在可以有自己的背景图片、背景颜色、文字颜色、字体、透明度和水平对齐方式——独立于全局演示设置。可通过任何歌曲上的右键上下文菜单访问专用的"歌曲样式"对话框。
- **每首歌曲的 PPTX 母版**：导出到 PowerPoint 时，每首歌曲可以使用自己的自定义母版幻灯片。
- **幻灯片之间的淡入淡出过渡**：可在设置中启用幻灯片之间的平滑交叉淡入淡出效果。淡入淡出持续时间可配置（默认：150 毫秒）。
- **空白幻灯片上的黑屏**：新设置使 Cantara 在显示空白幻灯片时显示纯黑屏而不是背景。
- **JSON 歌曲选择导出/导入**：歌曲选择现在可以保存并加载为 `.json` 文件。该格式将歌曲内容、每首歌曲的样式覆盖和背景图片捆绑到单个可移植文件中，从而实现跨机器的完整往返导出/导入。
- **Windows 深色模式**：Cantara 现在在 Windows 上遵循系统深色模式设置。
- **Windows 安装程序**：现在提供适用于 Windows 的 Inno Setup 安装程序。
- **第三方库对话框**：新对话框列出了 Cantara 使用的所有第三方库及其许可证。

#### 改进

- 改进了 Flatpak 权限处理：Cantara 现在在沙盒环境中使用 XDG 门户进行文件访问，并提供标准打开对话框以选择背景图片。
- 通过自定义自动换行功能改进了文本渲染，实现更准确的换行。
- 改进了字体渲染质量设置。
- 更新和扩展了翻译。
- 主窗口标题已简化为"Cantara"。

#### 错误修复

- 修复了在通过"全选"或拖放添加歌曲后，或在使用搜索过滤器后启动演示时的崩溃（SIGSEGV）——`TRepoFile` 对象引用在这些代码路径中没有附加到列表项。
- 修复了从上下文菜单调用时歌曲编辑器没有打开正确歌曲的问题（错误的文件查找和表单初始化时序问题）。
- 修复了背景颜色和透明度更改在歌曲样式预览对话框中不反映的问题。
- 修复了当两首歌曲共享相同背景图片但使用不同颜色时，背景颜色和透明度更改未应用于演示窗口和图片导出的问题。
- 修复了元数据解析截断包含冒号字符的字段值的问题。
- 修复了歌曲样式对话框中背景颜色面板的布局重叠和透明度值的错误符号。
- 修复了 PPTX 自定义母版幻灯片查找中的类型转换错误。
- 修复了在某些条件下关闭应用程序时的异常。
- 修复了 `.txt` 文件未被识别为有效歌曲文件的问题。
- 修复了演示画布中的多个文本大小和行长度计算问题。
- 修复了影响 Cantara 作为 Flatpak 运行的内容区域布局错误。

### 版本 2.6.0（2024-05-31）

- 迁移到 bgrabitmap 以更好地处理和显示演示幻灯片。未来，阴影等更多文本效果可以轻松实现。
- 重新设计多屏演示控制器：除歌曲外，每张有内容的幻灯片都被列出并可直接选择。
- 演示窗口的上下文菜单：全屏和结束演示现在也可以通过该菜单选择。
- 歌曲编辑器和全文搜索的小改进。
- 在歌曲选择的文件菜单下添加"选择所有歌曲"。
- 错误修复：未选择特定字体时演示显示错误 #24
- 错误修复：歌曲选择窗口中的拖放异常
- 错误修复：pptx 导出中特殊字符的错误转义
- 大量小错误修复和更正
- 翻译更新

### 版本 2.5.0（2023-08-21）

- 完全重写大部分源代码，包括生成和绘制演示幻灯片的内部结构
- 改进演示布局
- 改进歌曲编辑器
- 在设置菜单中实现演示预览
- 实现幻灯片导出到 pptx（使用 PptxgenJs）
- 实现幻灯片导出为图片
- 实现歌词导出到标记文本文件
- 实现浏览歌词的全文搜索
- 实现双语歌曲演示
- 改进演示窗口和控制（支持更多键和遥控器）
- 修复[问题 #17](https://github.com/reckel-jm/cantara/issues/17)
- Cantara 现在可以直接用 `.songtex` 文件打开。

### 版本 2.4.1（2023-01-30）意大利语和西班牙语翻译

2.4.1 版本为 Cantara 添加了意大利语和西班牙语翻译。除此之外，与 2.4.0 版本相比没有额外功能，这意味着如果您不使用这些语言之一，不一定需要更新到此版本。

**感谢译者！**

* 意大利语翻译由 [@albanobattistella](https://github.com/albanobattistella) 提供
* 西班牙语翻译由 [@haggen88](https://github.com/haggen88) 提供

感谢您的付出！

### 版本 2.4.0（2023-01-06）

2.4 版本终于来了！除了新功能外，它还带来了大量错误修复。详情请见下面的列表。

#### 改进/增强

* 实现了一个新编辑器，允许编辑歌曲、将 CCLI 歌曲转换为歌曲格式、创建新歌曲、存档和克隆歌曲（例如，用于不同版本）。
* 欢迎助手将在 Cantara 首次启动后引导新用户进行设置和了解程序。
* 如果在设置中配置，Cantara 可以自动将长幻灯片分成两页。
* 新实现的 SongTeX 文件格式允许导出带有歌词和顺序的歌曲幻灯片。

#### 错误修复

- 未选择背景图片时的浮点错误
- 选择背景时加载幻灯片需要很长时间

### 版本 2.3.2（2022-11-10）

这是一个小版本，带来了两个小但有用的改进：

* 完成繁体中文翻译
* 为 Flatpak 做好准备

查看相应的 [GitHub 页面](https://github.com/reckel-jm/cantara/releases/tag/v2.3.2)了解详情。

### 版本 2.3.1（2022-08-12）

这是一个小版本，是 2.3 版本的后续。

#### 改进

- 2.3.1 版本带来了对背景图片的支持。这些可以调整并使其透明（向背景颜色方向）或更亮。

#### 错误修复

- 修复 CCLI 许可证标签中的拼写错误。现在正确地为 `ccli-licensenumber`
- 完整的德语翻译

### 版本 2.3（2022-08-02）

经过测试和进一步开发，2.3 版本可以发布了。

改进：

* 支持 CCLI Songselect 格式
* 支持可在歌曲期间动态显示的元数据
* 源代码改进
* 源代码中为进一步开发做的准备、抽象
* 修复显示歌曲时的错误

一如既往，我期待收到反馈、建议和错误报告。
谢谢！

[前往发布的 Github 页面](https://github.com/reckel-jm/cantara/releases/tag/v2.3)
